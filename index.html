<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Chrome for Android theme color -->
<meta name="theme-color" content="#184160">
<!-- Tile color for Win8 -->
<meta name="msapplication-TileColor" content="#184160">
<link rel="icon" sizes="192x192" href="img/chrome-touch-icon-192x192.png">
<link rel="apple-touch-icon" href="img/apple-touch-icon.png">
<!-- Tile icon for Win8 (144x144) -->
<meta name="msapplication-TileImage" content="img/ms-touch-icon-144x144-precomposed.png">

<title>Greubi</title>
<style>
  body {
    margin: 0;
    padding: 0;
    animation-name: bg-color;
    animation-duration: 2s;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    animation-direction: alternate;
    /* Safari 4.0 - 8.0 */

    -webkit-animation-name: bg-color;
    -webkit-animation-duration: 2s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: alternate;

  }
  /* Safari 4.0 - 8.0 */
  @-webkit-keyframes bg-color {
    0%  {background-color: #fc102f}
    16% {background-color: #ec72f8}
    33% {background-color: #88f98b}
    49% {background-color: #f8ef8a}
    65% {background-color: #7648ff}
    82% {background-color: #1d6d94}
    100% {background-color: #3d31ff}
  }

  /* Standard syntax */
  @keyframes bg-color {
      0%  {background-color: #fc102f}
      16% {background-color: #ec72f8}
      33% {background-color: #88f98b}
      49% {background-color: #f8ef8a}
      65% {background-color: #7648ff}
      82% {background-color: #1d6d94}
      100% {background-color: #3d31ff}
  }

  #centerImg {
    margin: 0;
    padding: 0;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    transform: -webkit-translate(-50%, -50%);
    transform: -moz-translate(-50%, -50%);
    transform: -ms-translate(-50%, -50%);
  }

  .imgFade {
    animation-name: crapic;
    animation-duration: 1.2s;
    animation-timing-function: linear;
    animation-iteration-count: 1;
    /* Safari 4.0 - 8.0 */
    -webkit-animation-name: crapic;
    -webkit-animation-duration: 1.2s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: 1;
  }

  /* Safari 4.0 - 8.0 */
  @-webkit-keyframes crapic {
    from  {opacity: 0}
    to {opacity: 1}
  }

  /* Standard syntax */
  @keyframes crapic {
    from  {opacity: 0}
    to {opacity: 1}
  }

</style>
</head>
<body id="bod">

<img id="centerImg" src="img/spinner.gif" />

<script>
  function changeImage(element, image) {
    var downloadingImage = new Image();
    downloadingImage.onload = function() {
      element.src = this.src;
      //image.style.width = 'auto';
      //image.style.height = 'auto';
      element.style.maxWidth = image.maxWidth;
      element.style.maxHeight = image.maxHeight;
      // To re-trigger the animation I have
      // to remove the element and add it
      // back again... God I love JS
      void element.offsetWidth;
      element.classList.add('imgFade');
    };
    downloadingImage.src = image.src;
  }

  function resetSpinner(element) {
    element.src = 'img/spinner.gif';
    element.style.maxWidth = '';
    element.style.maxHeight = '';
    element.classList.remove('imgFade');
  }

  var images = Array();
  // If image is landscape:
  // maxHeight = H / W * 100
  // maxWidth = W / H * 100
  // If image is portrait, this is reverse. I suppose.
  images.push({src: 'img/crapic.png', maxWidth: '140.75vh', maxHeight: '71.05vw'});
  images.push({src: 'img/crapic_2.png', maxWidth: '82.8vh', maxHeight: '120.77vw'});
  var index = 0;
  var image = document.querySelector('#centerImg');
  changeImage(image, images[index]);
  // Isn't it better to use image.addEventListener ?
  image.onclick = function() {
    resetSpinner(image);
    if (++index == images.length) {
      index = 0;
    }
    changeImage(image, images[index]);
  };

</script>

</body>
</html>
